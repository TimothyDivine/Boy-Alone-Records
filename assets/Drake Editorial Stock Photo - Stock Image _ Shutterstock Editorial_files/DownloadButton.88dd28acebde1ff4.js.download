"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64743,99499],{76557:(e,t,n)=>{n.r(t),n.d(t,{Download:()=>i});var a=n(51895),r=n(31085),o=(0,n(75531).A)((0,r.jsx)("path",{d:"M24.933 15.733l-1.867-1.867-5.733 5.733V3.332h-2.667v16.267l-5.733-5.733-1.867 1.867 8.933 8.933 8.933-8.933zm-22.266 11.6V30h26.667v-2.667H2.667z"}),"Download.svg"),i=e=>(0,r.jsx)(o,(0,a._)({viewBox:"0 0 32 32"},e))},29380:(e,t,n)=>{n.d(t,{E:()=>o});var a=n(51895),r=n(18652),o=e=>{var{urlParams:t={},queryParams:n={}}=e,o="/bundle/".concat(t.filename),i=(0,a._)({},n);return{url:o,defaultParams:i,formattedUrl:(0,r.format)({pathname:o,query:i})}}},93473:(e,t,n)=>{n.d(t,{D:()=>v});var a=n(51895),r=n(91025),o=n(96353),i=n(31085),s=n(89522),l=n(6885),d=n(76434),c=n(18227),u=(0,n(33497).n9)()(e=>{var{palette:t,tokens:{color:n}}=e,a=t.mode===d.Xh.DARK,r=a?n["white-96"]:n.gray["onyx-87"];return{root:{position:"relative",display:"inline-flex",verticalAlign:"middle"},popper:{pointerEvents:"all"},tooltip:{color:a?t.common.black:t.common.white,backgroundColor:r},arrow:{color:r},tooltipHidden:{visibility:"hidden"}}}),v=e=>{var{className:t,tooltipClassName:n,children:d,title:v,isHidden:m,analyticsEventLabel:p,onMouseEnter:h}=e,f=(0,o._)(e,["className","tooltipClassName","children","title","isHidden","analyticsEventLabel","onMouseEnter"]),{classes:g,cx:_}=u(),{analytics:b}=(0,c.pn)(),w=(0,c.vl)();return v?(0,i.jsx)(s.A,{className:_(g.root,t),onMouseEnter:e=>{h?h(e):p&&b.hover({pageSection:w,eventLabel:p})},onClick:()=>{p&&b.click({pageSection:w,eventLabel:p})},children:(0,i.jsx)(l.A,(0,r._)((0,a._)({disableInteractive:!0,describeChild:!0,title:v,"data-automation":v,classes:{tooltip:_(g.tooltip,n,{[g.tooltipHidden]:m}),arrow:g.arrow,popper:g.popper}},f),{children:d}))}):(0,i.jsx)(i.Fragment,{children:d})}},25153:(e,t,n)=>{n.d(t,{t:()=>y});var a=n(51895),r=n(91025),o=n(96353),i=n(31085),s=n(33048),l=n(5073),d=n(89522),c=n(64669),u=n(93473),v=n(3229),m=n(74330),p=n(59513),h=n(59522),f=(0,n(33497).n9)()((e,t,n)=>{var{breakpoints:r,palette:o,spacing:i,tokens:{font:s,border:l}}=e,{withDefaultColorScheme:d}=t;return{icon:{fontSize:s.size.icon},iconButtonWithLabel:{display:"flex",alignItems:"center",gap:i(3),maxWidth:"90%",[".".concat(n.buttonSquared,":hover + .").concat(n.iconButtonLabel)]:{fontWeight:s.weight.bold,color:o.text.primary}},buttonSquared:(0,a._)({marginLeft:0,borderRadius:l.radius.l},!d&&{border:"1px solid ".concat(o.border1Color),backgroundColor:o.action.disabledBackground,":hover":{borderColor:"transparent",backgroundColor:o.info.inverted,color:o.getContrastText(o.info.inverted)}}),editActionButton:{width:"auto",padding:i(3),minWidth:0,[r.up("md")]:{padding:i(4)}},iconButtonLabel:{fontSize:s.size.xs,color:o.text.secondary,lineHeight:s.lineHeight.m,flex:"auto"}}}),g=e=>{var{isLoading:t=!1}=e;return(0,i.jsx)(i.Fragment,{children:t&&(0,i.jsx)(s.A,{"data-automation":"EditActionIcon_Loading",color:"inherit",size:24,sx:{position:"absolute"}})})},_=e=>{var{Icon:t,isIconButton:n,classProps:a,isLoading:r,children:o}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g,{isLoading:r}),(n&&t?(0,i.jsx)(t,{className:null==a?void 0:a.icon}):o)||(0,i.jsx)(l.A,{"data-automation":"EditActionButton_Skeleton",variant:"text",width:"70px"})]})},b=e=>{var{label:t,title:n,Component:r,tooltipPlacement:s="top",classProps:l}=e,d=(0,o._)(e,["label","title","Component","tooltipPlacement","classProps"]);return(0,i.jsx)(u.D,{placement:s,role:"tooltip",title:n||t,tooltipClassName:null==l?void 0:l.tooltip,children:(0,i.jsx)("span",{children:(0,i.jsx)(r,(0,a._)({},d))})})},w=e=>{var{label:t,title:n,classProps:s,isIconButton:l,Icon:u,squareButton:p,withTooltip:h,withLabel:f,withInlineLabel:g,tooltipPlacement:_}=e,w=(0,o._)(e,["label","title","classProps","isIconButton","Icon","squareButton","withTooltip","withLabel","withInlineLabel","tooltipPlacement"]),y=l?m.K:v.$n,x=(0,a._)({label:t,title:n,Component:y,classProps:s,tooltipPlacement:_},w);return p?(0,i.jsxs)(d.A,{className:null==s?void 0:s.iconContainer,children:[h?(0,i.jsx)(b,(0,a._)({},x)):g?(0,i.jsxs)(m.K,(0,r._)((0,a._)({},w),{children:[u&&(0,i.jsx)(u,{}),(0,i.jsx)(c.A,{variant:"caption",className:null==s?void 0:s.label,children:t})]})):(0,i.jsx)(m.K,(0,a._)({},w)),f&&(0,i.jsx)(c.A,{variant:"caption",className:null==s?void 0:s.label,children:t})]}):h?(0,i.jsx)(b,(0,a._)({},x)):(0,i.jsx)(y,(0,a._)({},w))},y=e=>{var{onClick:t,classProps:n,Icon:s,label:l,children:d,isLoading:c=!1,withLabel:u=!1,withInlineLabel:v=!1,withTooltip:m=!1,isIconButton:g=!1,squareButton:b=!1,withDefaultColorScheme:y=!1,variant:x}=e,k=(0,o._)(e,["onClick","classProps","Icon","label","children","isLoading","withLabel","withInlineLabel","withTooltip","isIconButton","squareButton","withDefaultColorScheme","variant"]),{cx:A,classes:I}=f({withDefaultColorScheme:y}),{classes:C}=(0,h.eu)(),{classes:R}=(0,p.V)(),B=(g||b)&&!!s,P={squareButton:b,isIconButton:B,classProps:(0,r._)((0,a._)({},n),{iconContainer:A(I.iconButtonWithLabel,null==n?void 0:n.iconContainer),label:A(I.iconButtonLabel,null==n?void 0:n.label),icon:A(I.icon,null==n?void 0:n.icon)})},E=(0,a._)((0,r._)((0,a._)({onClick:t,variant:x,className:A({[C.buttonFilter]:!B&&!y,[I.editActionButton]:!B,[R.darkBackgroundIcon]:B&&!y,[I.buttonSquared]:b},null==n?void 0:n.button)},B?{size:"small","aria-label":l,"data-automation":"EditActionIcon".concat(b?"Squared":"","Button").concat(m?"WithTooltip":"")}:{startIcon:s&&(0,i.jsx)(s,{className:A(I.icon,null==n?void 0:n.icon)}),variant:null!=x?x:"contained",color:"primary","data-automation":"EditActionButton".concat(m?"WithTooltip":"")}),{label:l,Icon:s,withLabel:u,withInlineLabel:v,withTooltip:m}),P,k);return(0,i.jsx)(w,(0,r._)((0,a._)({},E),{children:(0,i.jsx)(_,(0,r._)((0,a._)({Icon:s,isLoading:c},P),{children:d}))}))}},65755:(e,t,n)=>{n.d(t,{x:()=>c});var a=n(49253),r=n(51895),o=n(91025),i=n(31085),s=n(25153),l=n(30892),d=n(83079),c=e=>{var{asset:t,assetRegisteredCallback:n=d.lQ,registrationNotAllowedCallback:c,component:u=s.t,componentProps:v,onRegistration:m=d.lQ,children:p,isDisabled:h=!1}=e,{assetRegistrationHandler:f,isLoading:g}=(0,l.T)({generatedAsset:t,registrationCallback:n,registrationNotAllowedCallback:c}),_=function(){var e=(0,a._)(function*(){m(),yield f()});return function(){return e.apply(this,arguments)}}();return(0,i.jsx)(u,(0,o._)((0,r._)({onClick:_,disabled:g||h,isLoading:g},v),{children:p}))}},63563:(e,t,n)=>{n.r(t),n.d(t,{DownloadButton:()=>P});var a=n(49253),r=n(51895),o=n(91025),i=n(96353),s=n(31085),l=n(3319),d=n(32407),c=n(25153),u=n(65755),v=n(75839),m=n(52571),p=n(61428),h=n(55228),f=n(13912),g=n(18321),_=n(65288),b=n(51089),w=n(68473),y=n(23297),x=n(79487),k=n(67211),A=n(98474),I=n(83079),C=n(76557),R=n(74299),B=n(14041),P=e=>{var{asset:t,onRegistration:n=I.lQ,onRegistrationComplete:P=I.lQ,withTooltip:E=!1,isIconButton:S=!1,squareButton:D=!1,tooltipPlacement:z="top",isDisabled:j=!1,labelTrack:T=m.YVZ,canRegister:L=!0,originalAsset:O}=e,U=(0,i._)(e,["asset","onRegistration","onRegistrationComplete","withTooltip","isIconButton","squareButton","tooltipPlacement","isDisabled","labelTrack","canRegister","originalAsset"]),N=(0,x.a)(),M=(0,b.I2)(),{ready:G,t:F}=(0,R.Bd)(l.MJ$),q=F("common:actions_download"),W=(0,h.Q)(),[H,$]=(0,B.useState)(null),[Q,Z]=(0,B.useState)(!1),{enqueueGenericError:K}=(0,w.S)(),[Y,V]=(0,B.useState)(!1),{tosStatus:J}=(0,k.M)(),X=(0,B.useCallback)(()=>{Z(!1)},[Z]),ee=(0,B.useCallback)(()=>{M({action:b.rc.DOWNLOAD,asset:t}),n()},[M,n,t]),et=(0,B.useCallback)(e=>{Z(J),V(!J),$(e),(0,A.W)(e)||null==P||P(e)},[$,Z,P,J]),en=(0,B.useCallback)((0,a._)(function*(){if(!O||(0,_.KZ)(O)){K();return}var e={editsImage:t.id,finalZipName:"shutterstock_".concat(t.id,".zip")};if(null==O?void 0:O.isUpload)e.embedImage=O.id,new g.g(e,p.C3).resolveUrl({id:O.id},"originalCatalogUrl","",[]);else{$(O),Z(J),V(!J),e.embedImage=O.id;var n=new g.g(e,p.C3);W.current={downloader:n,isPeacock:!0}}}),[t.id,K,W,J,O]),ea=(0,y.G)(Q),er=(0,r._)((0,o._)((0,r._)({isIconButton:S,color:"secondary",labelTrack:T,label:q},(S||D||N)&&{Icon:C.Download}),{"data-automation":S?"syntheticAssetAction_DownloadIconButton":"syntheticAssetAction_DownloadButton",tooltipPlacement:z,squareButton:D,withLabel:D,withTooltip:E&&!N}),U);return(0,s.jsxs)(s.Fragment,{children:[L?(0,s.jsx)(u.x,{asset:t,assetRegisteredCallback:et,onRegistration:ee,component:c.t,componentProps:er,isDisabled:j,children:G&&q}):(0,s.jsx)(c.t,(0,o._)((0,r._)({},er),{onClick:en,children:G&&q})),ea?(0,s.jsx)(f.M,{asset:H,children:(0,s.jsx)(d.X,{isDrawerOpen:Q,onDrawerClose:X,themeModeOverride:void 0})}):null,(0,s.jsx)(v.l,{showTosModal:Y,setShowTosModal:V,setIsDrawerOpen:Z})]})}},59513:(e,t,n)=>{n.d(t,{V:()=>a});var a=(0,n(33497).n9)()(e=>{var{tokens:{color:t,spacing:n},palette:{secondary:a}}=e;return{darkBackgroundIcon:{padding:n.s,marginLeft:n.xxs,backgroundColor:t.gray["onyx-38"],color:t.white,"&:hover":{backgroundColor:t.gray["onyx-60"]}},redBackgroundIcon:{padding:n.s,marginLeft:n.xxs,color:t.white,backgroundColor:a.main,"&:hover":{backgroundColor:a.dark}},iconContainer:{display:"flex",flexDirection:"column",color:t.white,"&:hover":{color:t["white-70"]}},iconContainerDisabled:{display:"flex",flexDirection:"column",color:t["white-70"]},iconRoot:{padding:n.s,"&:hover":{background:"none"}},iconWrapper:{position:"relative"},iconProgress:{top:n.xxs,left:"calc(".concat(n.xxs,")"),zIndex:1,position:"absolute",color:t.white},iconLabel:{"&:hover":{color:t["white-70"]},color:t.white,display:"flex",flexDirection:"column"}}})},75839:(e,t,n)=>{n.d(t,{l:()=>r});var a=n(83894),r=n.n(a)()(()=>n.e(66266).then(n.bind(n,54402)).then(e=>({default:e.TosModal})),{loadableGenerated:{webpack:()=>[54402]},ssr:!1})},78776:(e,t,n)=>{n.r(t),n.d(t,{DownloadButton:()=>x});var a=n(51895),r=n(31085),o=n(5054),i=n(3229),s=n(89737),l=n(45182),d=n(51009),c=n(94782),u=n(87669),v=n(3276),m=n(72236),p=n(73072),h=n(99243),f=n(42869),g=n(83079),_=n(76557),b=n(31242),w=n(14041),y=(0,n(33497).n9)()(e=>{var{breakpoints:t,tokens:{spacing:n,color:a},palette:{secondary:r}}=e;return{root:{padding:"".concat(n.s," ").concat(n.base),[t.up("lg")]:{padding:"".concat(n.s," ").concat(n.xl)},whiteSpace:"nowrap"},redBackgroundIcon:{padding:n.s,marginLeft:n.xxs,color:a.white,backgroundColor:r.main,"&:hover":{backgroundColor:r.dark}}}}),x=e=>{var{asset:t=g.vB,clickAnalyticsLabel:n="",label:x,color:k="secondary",variant:A="contained",shouldUseDownloadIcon:I=!1,onClickHandlerOverride:C=null,isOverlay:R=!1,productToSellInOverlay:B=s.hl}=e,{classes:P}=y(),{asPath:E}=(0,b.useRouter)(),S=(0,p.h)(),D=(0,u.$9)(t),[,z]=(0,h.p4)(t)||[],j=D?"".concat(E,"?showDrawerOnLoad=true"):(0,v.$)({orderFlow:c.Y.LO_ASSET_OVERLAY,asset:t,productId:B,existingUserRedirect:z}),T=(0,a._)({landing_page:j},(null==t?void 0:t.type)===l.no&&{assetType:null==t?void 0:t.type,imageId:null==t?void 0:t.id}),L=(0,m.z)({query:T}),O=(0,w.useCallback)(()=>{S({actionName:d.mq.IMAGE_ADP_DOWNLOAD_CTA_CLICKED,customAttributes:{component:"DownloadButton"}}),L()},[S,L]),U=(0,u.dB)(t)&&t.videoRenderUrl;return I?(0,r.jsx)(o.A,{showGlobalProgressBar:!0,className:R?P.redBackgroundIcon:P.root,onClick:null!=C?C:O,"aria-label":x,clickTrack:n,size:"large",children:(0,r.jsx)(_.Download,{})}):(0,r.jsx)(i.$n,{className:P.root,color:k,variant:A,fullWidth:!0,onClick:null!=C?C:U?()=>{(0,f.I)(t)}:O,showGlobalProgressBar:!0,clickTrack:n,"aria-label":x,"data-automation":"AssetDownloadCta_DownloadButton",children:x})}},32407:(e,t,n)=>{n.d(t,{X:()=>r});var a=n(83894),r=n.n(a)()(()=>n.e(83768).then(n.bind(n,27841)).then(e=>({default:e.ThemedLicenseDrawer})),{loadableGenerated:{webpack:()=>[27841]},ssr:!1})},57086:(e,t,n)=>{n.d(t,{j:()=>i});var a=n(83079),r=n(14041),o={applyCanvasViewed:a.lQ,applyToolAnalytics:a.lQ,emitEditProductAnalyticsEvent:a.p5,setAnalyticsStatePartial:a.lQ},i=(0,r.createContext)(o)},71768:(e,t,n)=>{n.d(t,{v:()=>o});var a=n(14041),r=n(57086),o=()=>(0,a.useContext)(r.j)},51782:(e,t,n)=>{n.d(t,{A:()=>a});var a=(0,n(14041).createContext)({})},13912:(e,t,n)=>{n.d(t,{M:()=>i});var a=n(31085),r=n(14041),o=n(51782),i=e=>{var{allSizesAssetEligibility:t,asset:n,products:i=[],extraConfirmationDrawerContent:s,drawerStatusMessageProps:l,children:d}=e;return(0,a.jsx)(o.A.Provider,{value:(0,r.useMemo)(()=>({allSizesAssetEligibility:t,asset:n,products:i,extraConfirmationDrawerContent:s,drawerStatusMessageProps:l}),[t,n,i,s,l]),children:d})}},18321:(e,t,n)=>{n.d(t,{g:()=>p});var a=n(49253),r=n(94869),o=n(55185),i=n(93255),s=n(19567),l=n(43495),d=n(28962),c=n(19568),u=n(79253),{publicRuntimeConfig:{_app:{name:v,version:m}}}=n.n(u)()();class p{restartDownload(e,t,n,r){var o=this;return(0,a._)(function*(){return o.downloadPromises=[],o.resolveUrl(e,t,n,r),Promise.all(o.downloadPromises).then(e=>{var t=[].concat(...e);return o.createAndDownloadZip(t,o.config.finalZipName)})})()}configStreamSaver(){var e=this;return(0,a._)(function*(){var{streamSaver:t}=yield e.delayedDependencies,n=(window.location.hostname||"localhost").includes("localhost"),a="";n&&(a="https://www.qa.shutterstock.com"),t.mitm="".concat(a,"/static/mitm/mitm.html")})()}requestUnwatermarkedGeneratedAsset(e){return(0,c.request)({url:"/api/graphql",document:'query download {\n      generatedAssetOriginalSourceV2(assetId: "'.concat(e,'") {\n        data {\n          src\n        }\n      }\n    }'),variables:{},requestHeaders:{[o.E3]:v,[o.Jw]:m,[o.ef]:this.APP_NAME||"peacock"}}).then(e=>e.generatedAssetOriginalSourceV2.data.src)}createWaitingPromises(e){var t=[new Promise((e,t)=>{this.editsResolver=e,this.editsRejecter=t})];if(e.embedImage){var n=new Promise((e,t)=>{this.embedResolver=e,this.embedRejecter=t});t.push(n)}return t}generateEpsUrl(e){return(0,a._)(function*(){var t,n=i.NOy;(t=(null==e?void 0:e[0].asset)?(0,s.I)({assetsInfo:e}):{required_cookies:"",content:[{content_id:e[0].contentId,content_type:e[0].contentType,content_size:e[0].contentSize,content_format:e[0].contentFormat,license_name:e[0].licenseName,show_modal:!0}]}).content[0].content_size=d.XJ.Vector.toLocaleLowerCase(),t.content[0].content_format=d.vz.Eps.toLocaleLowerCase();var{downloadUrl:a}=yield(0,l.Dt)({downloadPayload:t,licenseeIdentifier:n});return a})()}resolveUrl(e,t,n,o){var i=this;return(0,a._)(function*(){var a=e.sizes?e.sizes:{},s=r.hq in a?yield i.generateEpsUrl(o):void 0;e.id===i.config.editsImage&&(i.downloadPromises.push(i.createEditsResponses(t,e.id,n)),s&&i.downloadPromises.push(i.createEmbedResponses(s)),i.editsResolver(t)),e.id===i.config.embedImage&&i.embedResolver&&(i.config.editsImage.includes("asset-generation")&&i.requestUnwatermarkedGeneratedAsset(i.config.editsImage).then(e=>{i.downloadPromises.push(i.createEditsResponses(e,i.config.editsImage,n)),i.editsResolver(e)}),i.downloadPromises.push(i.createEmbedResponses(t)),s&&i.downloadPromises.push(i.createEmbedResponses(s)),i.embedResolver(t))})()}resolveWatermarkedUrl(e,t,n){if(e===this.config.editsImage&&(this.downloadPromises.push(this.createEditsResponses(t,e,n)),this.editsResolver(t)),e===this.config.embedImage&&this.embedResolver){if(this.config.editsImage.includes("asset-generation")){var a,r=null===(a=this.config.imageEdits)||void 0===a?void 0:a.src;r&&(this.downloadPromises.push(this.createEditsResponses(r,this.config.editsImage,n)),this.editsResolver(r))}this.downloadPromises.push(this.createEmbedResponses(t)),this.embedResolver(t)}}createEmbedResponses(e){return(0,a._)(function*(){return[(yield fetch(e))]})()}createEditsResponses(e){return(0,a._)(function*(){return[(yield fetch(e))]})()}createAndDownloadZip(e,t){var n=this;return(0,a._)(function*(){var a,{streamSaver:r,downloadZip:o}=yield n.delayedDependencies,i=r.createWriteStream(t);null===(a=o(e).body)||void 0===a||a.pipeTo(i)})()}constructor(e,t="peacock"){this.downloadPromises=[],this.config=e,this.delayedDependencies=n.e(99670).then(n.bind(n,99670)),this.configStreamSaver(),this.APP_NAME=t,this.startingPromises=this.createWaitingPromises(e),this.downloadProcess=Promise.all(this.startingPromises).then(()=>Promise.all(this.downloadPromises)).then(t=>{var n=[].concat(...t);this.createAndDownloadZip(n,e.finalZipName)})}}},30037:(e,t,n)=>{n.d(t,{e:()=>v,s:()=>u});var a=n(51895),r=n(91025),o=n(90765),i=n(21347),s=n(45182),l=n(39385),d=n(80352),c=n(87669),u=e=>{var{asset:t}=e;switch((0,c.f0)(t)){case s.G_:return(0,d.ch)(Object.values(t.sizes));case s.W1:default:return(0,d.hp)((null==t?void 0:t.sizes)&&Object.values(t.sizes))}},v=e=>{var t,n,u,{asset:v,selectedAssetSize:m,selectedShadowsOption:p,isTitleNeeded:h=!1}=e,f=(0,l.ZC)({asset:v}),g=(0,c.R1)(v);(0,c.Kx)(v)&&(f=s.SL);var _=v.id.toString(),b=(0,l.Uw)({assetType:f,assetId:_});switch(f){case s.G_:case s.SL:n=null==(t=m||(null===(u=(0,d.zS)({sizes:v.sizes}))||void 0===u?void 0:u[0]))?void 0:t.resolution;break;case s.FY:case s.M9:case s.on:n=null==(t=m)?void 0:t.resolution;break;case s.vo:case s.kc:default:t=m||(0,d.hp)(v.sizes),[n]=t.name.split("_")}return(0,a._)({content_id:_,content_type:b,content_size:n,content_format:null==t?void 0:t.format},h?{content_title:null==v?void 0:v.title}:{},g?(0,r._)((0,a._)({},m.format===i.OA&&{include_shadows:"on"===p}),{angle:(null==v?void 0:v.angle)||o.R}):{})}},22714:(e,t,n)=>{n.d(t,{Rj:()=>y,og:()=>S});var a=n(49253),r=n(51895),o=n(63870),i=n(90765),s=n(21347),l=n(94869),d=n(45182),c=n(83507),u=n(17442),v=n(93255),m=n(80352),p=n(87669),h=n(11838),f=n(74490),g=n(34559),_=n(30082),b=n(39385),w=e=>{var t,n,{asset:a}=e,{angle:o,selectedFormatType:d,selectedShadowsOption:c}=a;return(0,r._)({angle:o||(null==a?void 0:null===(n=a.metadata)||void 0===n?void 0:null===(t=n.cart)||void 0===t?void 0:t.angle)||i.R,content_size:l.kP},d===s.OA&&{include_shadows:"on"===c})},y=e=>{var t,n,{asset:a}=e;return(null==a?void 0:null===(n=a.metadata)||void 0===n?void 0:null===(t=n.cart)||void 0===t?void 0:t.sizes)||a.sizes},x=function(){var e=(0,a._)(function*(e){var t,{asset:n}=e;if((null==n?void 0:null===(t=n.metadata)||void 0===t?void 0:t.cart)&&!n.metadata.cart.sizes){var a=(0,p.Kx)(n),r={id:n.id};return a&&(r.channel=c.H6,r.content_provider=u.Au),(yield f.Bn.get((0,o.yb)({queryParams:r}).formattedUrl).then(e=>{var{data:t}=e;return(0,g.A)(t)})).sizes}return y({asset:n})});return function(t){return e.apply(this,arguments)}}(),k=e=>{var t,n,a,r,{asset:o,is3dObject:i,isRexEditorial:s,selectedAssetSize:l}=e;return o.licenseAsJpeg||(null===(n=o.metadata)||void 0===n?void 0:null===(t=n.cart)||void 0===t?void 0:t.licenseAsJpeg)?"jpeg":i&&o.selectedFormatType?"3dByFormat":i&&(null===(r=o.metadata)||void 0===r?void 0:null===(a=r.cart)||void 0===a?void 0:a.size)?"3dBySize":h.N[l]?"comped":s?"rexEditorial":"default"},A=e=>{var t,n,a,r,{asset:o,licenseStrategy:i,selectedAssetSize:d,sizesToUseArray:c}=e,u=(()=>{switch(i){case"jpeg":return c.find(e=>{var{format:t}=e;return t===s.kr});case"3dByFormat":return c.find(e=>{var{format:t}=e;return t===o.selectedFormatType});case"3dBySize":return;case"comped":return(0,m.z6)({sizes:c,compSizeImage:d});default:return(0,m.hp)(c)}})(),v=(null==u?void 0:u.format)||(null===(n=o.metadata)||void 0===n?void 0:null===(t=n.cart)||void 0===t?void 0:t.format);switch(i){case"rexEditorial":return{size:l.mx,format:v};case"3dByFormat":var[p]=u.name.split("_");return{size:p,format:v};case"3dBySize":return{size:null==o?void 0:null===(r=o.metadata)||void 0===r?void 0:null===(a=r.cart)||void 0===a?void 0:a.size,format:v};default:return{size:h.PS[(0,_.C)(u.name)].downloadName,format:v}}},I=e=>{var t,n,a,o,{selectedAssetSize:i,asset:s}=e,d=y({asset:s}),c=(0,p.$9)(s),u=(0,p.R1)(s),v=u?w({asset:s,selectedAssetSize:i,sizesToUse:d}):{};if(!d&&(null==s?void 0:null===(n=s.metadata)||void 0===n?void 0:null===(t=n.cart)||void 0===t?void 0:t.size)&&(null==s?void 0:null===(o=s.metadata)||void 0===o?void 0:null===(a=o.cart)||void 0===a?void 0:a.format))return(0,r._)({content_size:c?l.mx:s.metadata.cart.size,content_format:s.metadata.cart.format},v);var m=Object.values(d),h=k({asset:s,is3dObject:u,isRexEditorial:c,selectedAssetSize:i}),{size:f,format:g}=A({asset:s,licenseStrategy:h,selectedAssetSize:i,sizesToUseArray:m});return(0,r._)({content_size:f,content_format:g},v)},C=e=>{var{map:t,licenseName:n}=e,a=t[n];return a===l.Fo?l.TR:a},R=e=>{var{asset:t,licenseName:n,isVideoComp:a,selectedAssetSize:r,sizes:o}=e,i=(0,p.$9)(t),s=(0,p.y8)(t),l=(0,p.s$)({sizes:Object.values(o)});return!a&&l?C({map:h._u,licenseName:n}):a||n===v.eNn||i||s?!r||i||s?(0,m.fk)(o):h.w4[r]:C({map:h.w4,licenseName:n})},B=function(){var e=(0,a._)(function*(e){var{asset:t,licenseName:n,isVideoComp:a,selectedAssetSize:r}=e,o=yield x({asset:t}),i=R({asset:t,licenseName:n,isVideoComp:a,selectedAssetSize:r,sizes:o}),s=(0,p.$9)(t),d=Object.values(o).find(e=>{var{resolution:t}=e;return h.KH[null==t?void 0:t.toLowerCase()]===i});return{content_size:s?l.mx:i,content_format:null==d?void 0:d.format}});return function(t){return e.apply(this,arguments)}}(),P=e=>{var t,{format:n,selectedAssetSize:a}=e;switch(a){case"stereo":t=l.GD;break;case"5.1":t=l.eC;break;default:t=l.LM}return{content_size:t,content_format:n===s.nz?s.nz:s.D1}},E=function(){var e=(0,a._)(function*(e){var{asset:t,licenseName:n,isVideoComp:a,selectedAssetSize:r,format:o}=e,i=(0,b.ZC)({asset:t});switch((0,p.Kx)(t)&&(i=d.SL),i){case d.G_:case d.SL:return yield B({asset:t,licenseName:n,isVideoComp:a,selectedAssetSize:r});case d.FY:return{content_size:l.Rf,content_format:d.FY};case d.M9:return P({selectedAssetSize:r,format:o});default:return I({selectedAssetSize:r,asset:t})}});return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,a._)(function*(e){var{licenseName:t,selectedAssetSize:n,asset:a,isVideoComp:o,format:i}=e,s=(0,b.ZC)({asset:a}),l=a.id.toString();return(0,r._)({content_id:l,content_type:(0,b.Uw)({assetType:s,assetId:l})},(yield E({asset:a,licenseName:t,isVideoComp:o,selectedAssetSize:n,format:i})))});return function(t){return e.apply(this,arguments)}}()},39385:(e,t,n)=>{n.d(t,{Ic:()=>c,Qk:()=>l,Uw:()=>i,ZC:()=>s,xB:()=>d});var a=n(45182),r=n(93255),o=n(87669),i=e=>{var{assetId:t,assetType:n}=e;if((0,o.$9)({id:t}))return a.uH;switch(n){case a.W1:case a.no:case a.kc:case a.m$:return a.vo;case a.BI:return a.G_;case a.on:case a.pS:return a.FY;case a.M9:return a.M9;default:return n}},s=e=>{var t,{asset:n}=e;if(null==n?void 0:null===(t=n.image)||void 0===t?void 0:t.isVector)return a.kc;if((0,o.$9)(n))return a.uH;var r=n.imageType||n.itemType||n.type;switch(r){case a.KB:case a.$E:case a.no:return a.W1;case a.BI:return a.G_;case a.pS:return a.FY;case a.M9:return a.M9;default:return r}},l=e=>{var{asset:t}=e;if((0,o.O6)(t))return a.uH;if((0,o.Kx)(t))return a.rr;var n=t.imageType||t.itemType||t.type;switch(n){case a.kc:case a.vo:case a.KB:case a.$E:case a.no:return a.W1;case a.BI:return a.G_;case a.pS:return a.FY;case a.M9:return a.M9;default:return n}},d=e=>{var{asset:t}=e;if((0,o.O6)(t))return a.oh;if((0,o.Kx)(t))return a.SL;var n=t.imageType||t.itemType||t.type;switch(n){case a.kc:case a.vo:case a.KB:case a.$E:case a.no:return a.W1;case a.BI:return a.G_;case a.pS:case a.on:return a.FY;case a.M9:return a.M9;default:return n}},c=e=>{var t=d({asset:e.mediaItem});return e.licenseName===r.H8E[t]}},19567:(e,t,n)=>{n.d(t,{I:()=>g,p:()=>_});var a=n(49253),r=n(51895),o=n(91025),i=n(3319),s=n(25888),l=n(93255),d=n(55228),c=n(30037),u=n(87669),v=n(24091),m=n(43495),p=n(83079),h=n(74299),f=n(14041),g=e=>{var{assetsInfo:t=[]}=e;return{required_cookies:"",content:t.map(e=>{var{asset:t,licenseName:n,selectedAssetSize:a,selectedShadowsOption:i}=e;return(0,o._)((0,r._)({},(0,c.e)({asset:t,selectedAssetSize:a,selectedShadowsOption:i})),{license_name:n,show_modal:!0})})}},_=e=>{var{setRedownloadStatus:t=p.lQ,onRedownloadSuccess:n=p.lQ}=e,[r,o]=(0,f.useState)(!1),c=(0,v.$)(),_=(0,d.Q)(),{t:b}=(0,h.Bd)(i.EJ3),w=b("file_name_edited");return{redownloadHandler:(0,f.useCallback)(function(){var e=(0,a._)(function*(e){var a,{assetsInfo:r,isPostDownload:i=!1}=e,{asset:d}=null!==(a=null==r?void 0:r[0])&&void 0!==a?a:{};o(!0),null==t||t({status:"",error:void 0});var v=g({assetsInfo:r}),p=(0,u.OJ)(d),h=(0,u.MO)(d),f=l.NOy;try{var{downloadUrl:b,licensedContent:y}=yield(0,m.Dt)({downloadPayload:v,licenseeIdentifier:f});if(null==n||n({content:y,assetsInfo:r}),!p&&!h){if(c({assets:[d],isComp:!1,isPaid:!1,isQuickDownload:!0,isRedownload:!0}),(null==_?void 0:_.current)&&0!==Object.keys(_.current).length){var{downloader:x}=_.current;i?null==x||x.restartDownload(d,b,w,r):null==x||x.resolveUrl(d,b,w,r)}else(0,m.Bx)(b,{target:"_blank"})}}catch(e){null==t||t({status:s.Nz,error:e})}finally{o(!1)}});return function(t){return e.apply(this,arguments)}}(),[w,_,n,c,t]),isRedownloadInProgress:r}}},24091:(e,t,n)=>{n.d(t,{$:()=>u});var a=n(51895),r=n(52571),o=n(71768),i=n(81127),s=n(55802),l=n(66969),d=n(18227),c=n(14041),u=()=>{var{analytics:e}=(0,d.pn)(),{locale:t}=(0,i.Y)(),{emitEditProductAnalyticsEvent:n}=(0,o.v)(),{getSearchContext:u}=(0,l.J)();return(0,c.useCallback)(o=>{var{assets:i=[],audioContext:l,eventLabel:d,licenseId:c,isRedownload:v,isQuickDownload:m,isPaid:p,isComp:h,pageSection:f,listId:g}=o,_=d||h&&r.z3l||void 0;e.productDownloaded((0,a._)({products:i.map(e=>(0,s.Un)({asset:e,shouldGetSearchContextFromAsset:!0,licenseId:c,pageSection:f})),download_context:(0,s.qn)({asset:i[0],isComp:h,isPaid:p,isQuickDownload:m,isRedownload:v,language:t}),eventLabel:_,list_id:null!=g?g:"",search_context:u(i[0])},l&&{audio_context:(0,a._)({},l)})),n("license")},[e,t,u,n])}},30892:(e,t,n)=>{n.d(t,{T:()=>B});var a=n(49253),r=n(3319),o=n(63870),i=n(25888),s=n(45182),l=n(61428),d=n(37564),c=n(27190),u=n(84792),v=n(36908),m=n(74490),p=n(34559),h=n(98474),f=n(83079),g=n(31242),_=n(74299),b=n(14041),w=n(73260);let y=JSON.parse('{"id":"ff0f1012e7b153d68ad774c80d8f2e7a248a0477296111cff33f280372c4c832","type":"mutation","name":"registerImage","source":"mutation registerImage($assetId:ID!){registerImage(assetId:$assetId){data{image{classicId __typename}__typename}problems{message __typename}__typename}}"}');var x=n(85322),k=n(15129),A=n(61459),I=()=>{var e=(0,k.U)(w.Vr,!1),t=(0,x.$)("/",e),[n,r]=(0,b.useState)(!1);return{isLoading:n,registerAsset:(0,b.useCallback)(function(){var e=(0,a._)(function*(e){var{id:n}=e;r(!0);try{var a=e=>{throw e},o=e=>e.registerImage;return yield t(y.source,{assetId:n}).then(e=>(0,A.F)({response:e,onError:a,onSuccess:o}))}finally{r(!1)}});return function(t){return e.apply(this,arguments)}}(),[t])}},C=e=>"AssetRegistrationDisallowedProblem"===e.__typename,R=e=>e.problems&&e.problems.find(e=>C(e)),B=e=>{var{generatedAsset:t,registrationCallback:n=f.lQ,registrationNotAllowedCallback:w}=e,{isLoading:y,registerAsset:x}=I(),k=(0,g.useRouter)(),A=(0,v.i9)(),C=(0,c.KZ)({landing_page:k.asPath}),{enqueueSnackbar:B}=(0,d.d)(),P=(0,u.v)(),{t:E}=(0,_.Bd)(r.Fjj);return{assetRegistrationHandler:(0,b.useCallback)((0,a._)(function*(){if(!A){k.push(C);return}if(!y){if(!(0,h.A)(t)){null==n||n(t);return}var e=e=>{B({alertSeverity:i.ff,error:e,jiraReference:"AIGEN-197",message:E("notifications:label_generic_failure"),reason:"asset registration"}),P({error:e,msg:l.a_,customAttributes:{generatedAssetId:t.id}})};try{var a,r=yield x(t),d=R(r);if(d){var{sourceAsset:c}=d;if(w&&c){if("CreativeImage"===c.__typename){var u=yield m.Bn.get((0,o.LB)({id:c.classicId,assetType:s.W1,queryParams:void 0}).formattedUrl).then(e=>(0,p.A)(e.data));w(u)}else"UserImage"===c.__typename?w(c):e(Error("Blocking asset not handled"));return}e(Error("Asset registration not allowed but fallback not provided"));return}var v=null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.image.classicId,f=yield m.Bn.get((0,o.LB)({id:v,assetType:s.W1,queryParams:void 0}).formattedUrl).then(e=>(0,p.A)(e.data));n(f)}catch(t){if(t===l.OQ.UNAUTHORIZED){k.push(C);return}e(t)}}}),[A,y,t,k,C,n,x,w,B,E,P]),isLoading:y}}},51089:(e,t,n)=>{n.d(t,{I2:()=>v,YW:()=>d,rc:()=>c});var a=n(51895),r=n(73072),o=n(73027),i=n(99613),s=n(31242),l=n(14041),d=function(e){return e.HOMEPAGE="GHP",e.RESULTS="GRP",e.CHATBOT="CHATBOT",e}({}),c=function(e){return e.PAGE="page loaded",e.GENERATE="generate text_to_image",e.MAGIC_BRUSH="generate inpainted image",e.VARIATION="generate variation",e.ZOOM_OUT="generate zoom_out",e.DOWNLOAD="download",e.COMP="comp",e.ADD_TO_CART="add_to_cart",e.LICENSED="licensed",e.REDOWNLOAD="redownloaded",e.NEW_MESSAGE="chat message sent",e}({}),u={[(0,o.ll)()[0]]:"GHP",[o.ns]:"GRP",[o.AR]:"CHATBOT"},v=()=>{var{pathname:e}=(0,s.useRouter)(),t=(0,r.h)();return(0,l.useCallback)(n=>{var{action:r,page:o,customAttributes:s,asset:l,generationType:d}=n,c=(null!=o?o:u[(0,i.YT)(e)])||"";t({actionName:"".concat("Generate"," - ").concat(c," - ").concat(r),customAttributes:(0,a._)({},s,l&&{assetId:l.id},d&&{generationType:d})})},[t,e])}},72236:(e,t,n)=>{n.d(t,{z:()=>c});var a=n(51895),r=n(91025),o=n(43495),i=n(97753),s=n(99613),l=n(14041),d=n(27190),c=function(){var{asset:e,query:t,shouldSetLocalStorage:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=(0,d.pb)(t);return(0,l.useCallback)(()=>{if(i.B){var t,l;n&&(0,o.lL)(e),null===(l=window.NREUM)||void 0===l||null===(t=l.addPageAction)||void 0===t||t.call(l,"UP3-1623 assign useSignUpPageRedirect signUpPath to href",(0,r._)((0,a._)({},window.location||{}),{shouldSetLocalStorage:n,signUpPath:c})),(0,s.L3)(c,"signUpPageRedirect")}},[c,e,n])}},68473:(e,t,n)=>{n.d(t,{S:()=>s});var a=n(3319),r=n(25888),o=n(37564),i=n(74299),s=()=>{var{enqueueSnackbar:e}=(0,o.d)(),{t}=(0,i.Bd)(a.mRw);return{enqueueGenericError:n=>{e({alertSeverity:r.ff,error:n,message:t("notifications:label_generic_failure"),reason:"generic error"})}}}},23297:(e,t,n)=>{n.d(t,{G:()=>r});var a=n(14041),r=e=>{var t=(0,a.useRef)(!1);return!t.current&&e&&(t.current=!0),t.current}},67211:(e,t,n)=>{n.d(t,{M:()=>u});var a=n(49253),r=n(63870),o=n(65915),i=n(36908),s=n(22183),l=n(74490),d=n(14041),c=n(48917),u=function(){var{defaultTosStatus:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{defaultTosStatus:!0},t=(0,r.Q$)().formattedUrl,n=(0,i.i9)(),{mutate:u}=(0,c.iX)(),{data:v=e,error:m,isLoading:p}=(0,s.P)(n?t:null,e=>l.Bn.get(e).then(e=>{var{data:{agreedTime:t}={}}=e;return!!t}),{dedupingInterval:o.To});return{onAcceptTos:(0,d.useCallback)((0,a._)(function*(){try{yield l.Bn.post(t),yield u(t)}catch(e){}}),[u,t]),tosStatus:!!m||v,isLoading:p}}},43495:(e,t,n)=>{n.d(t,{Bx:()=>b,Dt:()=>x,G$:()=>y,T9:()=>C,Zj:()=>A,fX:()=>w,lL:()=>I});var a=n(49253),r=n(51895),o=n(91025),i=n(29380),s=n(63870),l=n(21347),d=n(94869),c=n(45182),u=n(83507),v=n(93255),m=n(22714),p=n(80352),h=n(87669),f=n(70627),g=n(74490),_=n(10542),b=function(e){var{name:t,target:n="_self"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElement("a");a.setAttribute("data-automation","FeatureDownload_utils_link"),a.style.display="none",a.href=e,a.target=n,a.download=t||e,document.body.appendChild(a),a.click(),(0,_.rd)()||document.body.removeChild(a)},w=function(){var e=(0,a._)(function*(e){var{downloadBundlePayload:t}=e,n=(0,i.E)({urlParams:{filename:t.bundleFilename}}).formattedUrl,{public_url:a}=(yield g.a8.post(n,t.content)).data;return a});return function(t){return e.apply(this,arguments)}}(),y=e=>{var{licensedContent:t,supplementalUrlType:n}=e,{downloadUrl:a,supplementalUrls:r}=t[0];if((null==r?void 0:r.length)&&n){var{url:o=a}=r.find(e=>{var{type:t}=e;return t===n})||{};return o}return a},x=function(){var e=(0,a._)(function*(e){var{downloadPayload:t,supplementalUrlType:n,licenseeIdentifier:a}=e,r=(0,s.Gt)({urlParams:{licenseeIdentifier:a}}).formattedUrl,{data:{meta:{licensedContent:o}}}=yield g.Bn.post(r,t);return{downloadUrl:y({licensedContent:o,supplementalUrlType:n}),licensedContent:o}});return function(t){return e.apply(this,arguments)}}(),k=e=>{var{existingAssetLicenses:t,contentType:n,licenseName:a,subscriptions:r}=e;switch(n){case c.G_:var o,i,s=(0,f.d)({existingAssetLicenses:t,subscriptions:[...null!==(o=null==r?void 0:r.videoSubscriptions)&&void 0!==o?o:[],...null!==(i=null==r?void 0:r.videoCompSubscriptions)&&void 0!==i?i:[]],licenseName:a});return(null==s?void 0:s.redeemableFor)||a;case c.FY:return a||v.nYH;case c.M9:return a||v.X0R;case c.vo:default:return a}},A=function(){var e=(0,a._)(function*(e){var t,{assets:n,existingAssetLicenses:i,format:s,selectedAssetSize:v,subscriptions:f}=e,g=n.map((t=(0,a._)(function*(e){var t=(0,p.R9)({asset:e}),n=yield(0,m.og)({asset:e,licenseName:e.licenseId,selectedAssetSize:v});return(0,o._)((0,r._)({},n,t===c.M9&&{override_filename:"".concat(u.wT,"_").concat(e.id,".").concat(s||n.content_format)},(0,h.R1)(e)&&(0,r._)({content_provider:"pixelsquid-media",content_size:d.kP},e.selectedFormatType===l.OA&&{include_shadows:"on"===e.selectedShadowsOption})),{license_name:f?k({existingAssetLicenses:i,contentType:t,licenseName:e.licenseId,subscriptions:f}):e.licenseId,show_modal:!0})}),function(e){return t.apply(this,arguments)}));return{required_cookies:"",content:yield Promise.all(g)}});return function(t){return e.apply(this,arguments)}}(),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.id&&(e.title||e.description)&&e.type&&window.localStorage.setItem("sstk_ent_asset_preview",JSON.stringify({id:e.id,title:e.title||e.description,thumb:e.src||e.previewImageUrl||"",video:e.previewVideoUrls,url:e.link,type:(0,h.f0)(e),isRex:e.isRexEditorial}))},C=e=>{var t;return requestAnimationFrame?function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e(...a)})}:e}},61459:(e,t,n)=>{n.d(t,{F:()=>i});var a=n(61428);n(19568);var r=n(79253),{publicRuntimeConfig:{apiEndpoints:o}}=n.n(r)()(),i=e=>{var t,n,{response:r,onError:o,onSuccess:i}=e,{errors:s}=r;return s&&(null==s?void 0:s.length)>0?o((null===(t=s[0].extensions)||void 0===t?void 0:t.code)===a.OQ.UNAUTHORIZED?a.OQ.UNAUTHORIZED:null===(n=s[0].extensions)||void 0===n?void 0:n.code):i(r.data)}},98474:(e,t,n)=>{n.d(t,{A:()=>o,W:()=>r});var a=n(45182),r=e=>!!(e&&e.isUpload),o=e=>!!(e&&e.type===a._g)},42869:(e,t,n)=>{n.d(t,{I:()=>i});var a=n(49253),r=n(43495),o={"video/mp4":".mp4","image/gif":".gif"},i=function(){var e=(0,a._)(function*(e){var t=yield fetch("".concat(e.videoRenderUrl,"?doc_id=").concat(e.id),{mode:"cors",credentials:"include"}).then(e=>e.blob()),n=o[t.type]||"";(0,r.Bx)(URL.createObjectURL(t),{name:"".concat(e.title).concat(n)})});return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=DownloadButton.88dd28acebde1ff4.js.map